<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITS Demo - Inference-Time Scaling</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Azeret+Mono:wght@400;500;600;700;800&family=Public+Sans:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Performance Visualization V2 CSS -->
    <link rel="stylesheet" href="performance-viz-v2.css">

    <!-- Guided Demo CSS -->
    <link rel="stylesheet" href="guided-demo.css">

    <!-- Interactive Demo CSS -->
    <link rel="stylesheet" href="interactive-demo.css">

    <!-- KaTeX for Math Rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <!-- Landing Page -->
    <div id="landingPage">
        <div class="landing-header">
            <h1 class="landing-title">Inference-Time Scaling</h1>
            <p class="landing-subtitle">
                Explore how ITS algorithms enhance model performance through computational scaling at inference time
            </p>
        </div>

        <div class="landing-choices">
            <!-- Guided Demo Option -->
            <div class="choice-card guided" onclick="selectExperience('guided')">
                <span class="choice-icon">üìö</span>
                <h2 class="choice-title">Guided Demo</h2>
                <p class="choice-description">
                    Explore pre-loaded scenarios showing representative ITS improvements across different algorithms and providers.
                </p>
                <ul class="choice-features">
                    <li>Pre-loaded scenarios with representative results</li>
                    <li>Compare baseline vs ITS side-by-side</li>
                    <li>View algorithm traces and metrics</li>
                    <li>No backend required - instant loading</li>
                    <li>Perfect for presentations and demos</li>
                </ul>
                <div class="choice-cta">Explore Scenarios ‚Üí</div>
            </div>

            <!-- Interactive Demo Option -->
            <div class="choice-card interactive" onclick="selectExperience('interactive')">
                <span class="choice-icon">‚ö°</span>
                <h2 class="choice-title">Interactive Demo</h2>
                <p class="choice-description">
                    Run live comparisons with your own questions and configurations against hosted models.
                </p>
                <ul class="choice-features">
                    <li>Ask your own questions</li>
                    <li>Choose models and algorithms</li>
                    <li>Adjust compute budgets</li>
                    <li>See ITS improvements in real time</li>
                    <li>Compare use cases (improve, match frontier)</li>
                </ul>
                <div class="choice-cta">Start Experimenting ‚Üí</div>
            </div>
        </div>

        <div class="landing-footer">
            Red Hat AI Innovation Team ‚Ä¢ Powered by its_hub
        </div>
    </div>

    <!-- Main Demo Container (initially hidden) -->
    <div id="demoContainer" class="hidden">
        <!-- Back to Home Button -->
        <button class="back-to-home" id="backToHomeBtn" onclick="returnToLanding()">
            <span>‚Üê</span>
            <span>Back to Home</span>
        </button>

        <!-- Theme Toggle (Floating) -->
        <div class="theme-toggle" onclick="toggleTheme()">
            <span class="theme-icon sun-icon">‚òÄÔ∏è</span>
            <span class="theme-icon moon-icon">üåô</span>
        </div>

        <!-- Expert Mode Toggle (Floating) - only show in interactive mode -->
        <div class="expert-mode-toggle" id="expertModeToggle" onclick="toggleExpertMode()">
            <span class="expert-mode-icon">üéì</span>
            <span class="expert-mode-label">Expert Mode</span>
        </div>

        <div class="container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <div class="header-logo-section">
                    <div class="header-text">
                        <div class="header-title-main">Red Hat AI Innovation Team</div>
                        <h1>Inference-Time Scaling</h1>
                    </div>
                </div>
                <p class="subtitle" id="headerSubtitle">Compare baseline inference with ITS algorithms side by side</p>
            </div>
        </header>

        <!-- Use Case Selection -->
        <div class="section" id="useCaseSection">
            <div class="section-header">
                <h2 class="section-title">Choose Your Use Case</h2>
                <p class="section-description">Select what you want to demonstrate with ITS</p>
            </div>

            <div style="display: grid; gap: 16px; grid-template-columns: 1fr 1fr 1fr;">
                <label class="use-case-card" data-use-case="improve_model">
                    <input type="radio" name="useCase" value="improve_model" checked onchange="onUseCaseChange()">
                    <div class="use-case-content">
                        <div class="use-case-header">
                            <span class="use-case-icon">üìà</span>
                            <h3 class="use-case-title">Improve Model Performance</h3>
                        </div>
                        <p class="use-case-description">Use ITS to improve any model's performance on the same task</p>
                        <div class="use-case-comparison">
                            <span class="comparison-item">Model (Baseline)</span>
                            <span class="comparison-vs">vs</span>
                            <span class="comparison-item highlight">Model + ITS</span>
                        </div>
                    </div>
                </label>

                <label class="use-case-card" data-use-case="match_frontier">
                    <input type="radio" name="useCase" value="match_frontier" onchange="onUseCaseChange()">
                    <div class="use-case-content">
                        <div class="use-case-header">
                            <span class="use-case-icon">‚öñÔ∏è</span>
                            <h3 class="use-case-title">Match Frontier with Smaller Model</h3>
                        </div>
                        <p class="use-case-description">Compare small model baseline, small model + ITS, and frontier model performance</p>
                        <div class="use-case-comparison">
                            <span class="comparison-item">Small</span>
                            <span class="comparison-vs">‚Üí</span>
                            <span class="comparison-item highlight">Small + ITS</span>
                            <span class="comparison-vs">‚âà</span>
                            <span class="comparison-item">Frontier</span>
                        </div>
                    </div>
                </label>

                <label class="use-case-card" data-use-case="tool_consensus">
                    <input type="radio" name="useCase" value="tool_consensus" onchange="onUseCaseChange()">
                    <div class="use-case-content">
                        <div class="use-case-header">
                            <span class="use-case-icon">ü§ñ</span>
                            <h3 class="use-case-title">Agent Tool Consensus</h3>
                        </div>
                        <p class="use-case-description">Show how ITS creates consensus on tool selection for reliable agents</p>
                        <div class="use-case-comparison">
                            <span class="comparison-item">Single Call</span>
                            <span class="comparison-vs">vs</span>
                            <span class="comparison-item highlight">Tool Voting</span>
                        </div>
                    </div>
                </label>
            </div>
        </div>

        <!-- Guided Demo Badge -->
        <div class="guided-demo-badge hidden" id="guidedDemoBadge">
            üìö Guided Demo Mode
        </div>

        <!-- Guided Demo Wizard -->
        <div id="guidedWizard" class="guided-wizard hidden">
            <!-- Progress Bar -->
            <div class="guided-progress">
                <div class="guided-progress-bar" id="guidedProgressBar" style="width: 0%"></div>
            </div>
            <div class="guided-breadcrumbs" id="guidedBreadcrumbs">
                <span class="g-crumb active" data-step="1">Goal</span>
                <span class="g-crumb-sep">/</span>
                <span class="g-crumb" data-step="2">Method</span>
                <span class="g-crumb-sep">/</span>
                <span class="g-crumb" data-step="3">Scenario</span>
                <span class="g-crumb-sep">/</span>
                <span class="g-crumb" data-step="4">Run</span>
                <span class="g-crumb-sep">/</span>
                <span class="g-crumb" data-step="5">Trace</span>
                <span class="g-crumb-sep">/</span>
                <span class="g-crumb" data-step="6">Performance</span>
            </div>

            <!-- Step 1: Goal Selection -->
            <div id="guidedStep1" class="guided-step">
                <h3 class="guided-step-title">What would you like to explore?</h3>
                <p class="guided-step-subtitle">Select your goal to see how ITS can help</p>
                <div class="guided-cards-grid">
                    <div class="guided-card" data-goal="improve_performance" onclick="guidedSelectGoal('improve_performance')">
                        <div class="guided-card-icon">üìà</div>
                        <h4>Improve Model Performance</h4>
                        <p>Use ITS to enhance any model's output quality on the same task</p>
                    </div>
                    <div class="guided-card" data-goal="match_frontier" onclick="guidedSelectGoal('match_frontier')">
                        <div class="guided-card-icon">‚öñÔ∏è</div>
                        <h4>Improve Small Model to Match Frontier</h4>
                        <p>Make a smaller, cheaper model perform as well as a large frontier model</p>
                    </div>
                </div>
            </div>

            <!-- Step 2: ITS Method Selection -->
            <div id="guidedStep2" class="guided-step hidden">
                <button class="guided-back-btn" onclick="guidedGoBack(1)">‚Üê Back</button>
                <h3 class="guided-step-title">Choose an ITS Method</h3>
                <p class="guided-step-subtitle">Each method uses a different strategy to improve results</p>
                <div class="guided-cards-grid">
                    <div class="guided-card" data-method="self_consistency" onclick="guidedSelectMethod('self_consistency')">
                        <div class="guided-card-icon">üó≥Ô∏è</div>
                        <h4>Self-Consistency</h4>
                        <p>Generate multiple responses and select the most common answer via majority voting</p>
                        <span class="guided-card-tag">Best for: factual questions, math</span>
                    </div>
                    <div class="guided-card" data-method="best_of_n" onclick="guidedSelectMethod('best_of_n')">
                        <div class="guided-card-icon">üèÜ</div>
                        <h4>Best-of-N</h4>
                        <p>Generate multiple responses and use an LLM judge to select the highest quality answer</p>
                        <span class="guided-card-tag">Best for: open-ended, creative tasks</span>
                    </div>
                </div>
            </div>

            <!-- Step 3: Model Scenario Selection -->
            <div id="guidedStep3" class="guided-step hidden">
                <button class="guided-back-btn" onclick="guidedGoBack(2)">‚Üê Back</button>
                <h3 class="guided-step-title">Choose a Scenario</h3>
                <p class="guided-step-subtitle" id="guidedStep3Subtitle">Select a model configuration</p>
                <div id="guidedScenarioCards" class="guided-cards-grid">
                    <!-- Populated dynamically by guided-demo.js -->
                </div>
            </div>

            <!-- Step 4: Prompt + Submit -->
            <div id="guidedStep4" class="guided-step hidden">
                <button class="guided-back-btn" onclick="guidedGoBack(3)">‚Üê Back</button>
                <div class="guided-scenario-summary" id="guidedScenarioSummary"></div>
                <h3 class="guided-step-title">Ready to Run</h3>
                <p class="guided-step-subtitle">Review the question and submit to see the pre-loaded scenario</p>
                <div class="guided-prompt-area">
                    <div class="guided-prompt-label">Question</div>
                    <div class="guided-prompt-text" id="guidedPromptText"></div>
                </div>
                <div class="guided-submit-area">
                    <button class="btn-primary guided-submit-btn" id="guidedSubmitBtn" onclick="guidedSubmit()">
                        <span>‚ñ∂</span>
                        <span>Submit</span>
                    </button>
                </div>
            </div>

            <!-- Step 5: Responses + Trace -->
            <div id="guidedStep5" class="guided-step hidden">
                <button class="guided-back-btn" onclick="guidedGoBack(4)">‚Üê Back</button>
                <h3 class="guided-step-title">Results</h3>
                <div class="guided-responses" id="guidedResponses"></div>
                <div class="guided-trace-area hidden" id="guidedTraceArea">
                    <div class="guided-trace-header">
                        <h4>ITS Trace Visualization</h4>
                        <p>See how the algorithm evaluated multiple candidates to find the best answer</p>
                    </div>
                    <div id="guidedTraceContent"></div>
                </div>
                <div class="guided-next-area hidden" id="guidedNextArea">
                    <button class="btn-primary" onclick="guidedShowPerformance()">
                        <span>View Performance Details ‚Üí</span>
                    </button>
                </div>
            </div>

            <!-- Step 6: Performance Page -->
            <div id="guidedStep6" class="guided-step hidden">
                <button class="guided-back-btn" onclick="guidedGoBack(5)">‚Üê Back to Results</button>
                <h3 class="guided-step-title">Performance Analysis</h3>
                <p class="guided-step-subtitle">Cost, quality, latency, and token comparison</p>
                <div class="guided-perf-summary" id="guidedPerfSummary"></div>
                <div class="guided-perf-charts" id="guidedPerfCharts"></div>
            </div>
        </div>

        <!-- Interactive Demo Wizard -->
        <div id="interactiveWizard" class="interactive-wizard hidden">
            <!-- Progress Bar -->
            <div class="iw-progress">
                <div class="iw-progress-bar" id="iwProgressBar" style="width: 0%"></div>
            </div>
            <div class="iw-breadcrumbs">
                <span class="iw-crumb active" data-step="1">Access</span>
                <span class="iw-crumb-sep">/</span>
                <span class="iw-crumb" data-step="2">Status</span>
                <span class="iw-crumb-sep">/</span>
                <span class="iw-crumb" data-step="3">Scenario</span>
                <span class="iw-crumb-sep">/</span>
                <span class="iw-crumb" data-step="4">Configure &amp; Run</span>
                <span class="iw-crumb-sep">/</span>
                <span class="iw-crumb" data-step="5">Results</span>
            </div>

            <!-- Step 1: Provider Access Page -->
            <div id="iwStep1" class="iw-step">
                <h3 class="iw-step-title">Live Model Access</h3>
                <p class="iw-step-subtitle">This demo runs live API calls against real models. You need at least one provider configured.</p>

                <div class="iw-info-banner">
                    <strong>How it works:</strong> The demo connects to your configured model providers.
                    Which models appear depends on which API keys you have set in the backend's <code>.env</code> file.
                    You only need <strong>one provider</strong> to get started.
                </div>

                <div class="iw-provider-grid">
                    <!-- OpenAI -->
                    <div class="iw-provider-card iw-provider-copyable" data-provider="openai" onclick="iwCopySetup(this)" data-copy="OPENAI_API_KEY=sk-...">
                        <div class="iw-provider-header">
                            <span class="iw-provider-name">OpenAI</span>
                            <span class="iw-copy-hint">Click to copy</span>
                        </div>
                        <div class="iw-provider-models">GPT-4o, GPT-4o Mini, GPT-4 Turbo, GPT-3.5 Turbo</div>
                        <div class="iw-provider-setup">OPENAI_API_KEY=sk-...</div>
                    </div>

                    <!-- OpenRouter -->
                    <div class="iw-provider-card iw-provider-copyable" data-provider="openrouter" onclick="iwCopySetup(this)" data-copy="OPENROUTER_API_KEY=sk-or-...">
                        <div class="iw-provider-header">
                            <span class="iw-provider-name">OpenRouter</span>
                            <span class="iw-copy-hint">Click to copy</span>
                        </div>
                        <div class="iw-provider-models">Llama 3, Mistral, Qwen, Gemma, DeepSeek (15+ open-source models)</div>
                        <div class="iw-provider-setup">OPENROUTER_API_KEY=sk-or-...</div>
                    </div>

                    <!-- Vertex AI -->
                    <div class="iw-provider-card iw-provider-copyable" data-provider="vertex_ai" onclick="iwCopySetup(this)" data-copy="VERTEX_PROJECT=your-project-id">
                        <div class="iw-provider-header">
                            <span class="iw-provider-name">Google Cloud Vertex AI</span>
                            <span class="iw-copy-hint">Click to copy</span>
                        </div>
                        <div class="iw-provider-models">Claude 3.5 Sonnet/Opus/Haiku, Gemini 1.5 Pro/Flash</div>
                        <div class="iw-provider-setup">VERTEX_PROJECT=your-project-id
gcloud auth application-default login</div>
                    </div>

                    <!-- Self-Hosted -->
                    <div class="iw-provider-card iw-provider-copyable" data-provider="local" onclick="iwCopySetup(this)" data-copy="VLLM_BASE_URL=http://localhost:8100/v1">
                        <div class="iw-provider-header">
                            <span class="iw-provider-name">Self-Hosted / Local</span>
                            <span class="iw-copy-hint">Click to copy</span>
                        </div>
                        <div class="iw-provider-models">Any model served via vLLM or OpenAI-compatible endpoint</div>
                        <div class="iw-provider-setup">VLLM_BASE_URL=http://localhost:8100/v1</div>
                    </div>
                </div>

                <p style="font-size:13px; color:var(--text-tertiary); text-align:center; margin-bottom:20px;">
                    Click a card to copy its env variable, then paste into <code>demo_ui/.env</code> and restart the backend.
                </p>

                <div class="iw-center-actions">
                    <button class="btn-primary" onclick="iwCheckProviders()">
                        Check Access &amp; Continue
                    </button>
                </div>
            </div>

            <!-- Step 2: Provider Status -->
            <div id="iwStep2" class="iw-step hidden">
                <button class="iw-back-btn" onclick="iwGoBack(1)">‚Üê Back</button>
                <h3 class="iw-step-title">Provider Status</h3>
                <p class="iw-step-subtitle">Detected credentials and available models</p>
                <div id="iwProviderStatus"></div>
                <div id="iwModelList"></div>
                <div class="iw-center-actions">
                    <button class="btn-primary" id="iwProceedBtn" disabled onclick="iwShowStep(3)">
                        Continue to Scenario Selection
                    </button>
                </div>
            </div>

            <!-- Step 3: Scenario Selection -->
            <div id="iwStep3" class="iw-step hidden">
                <button class="iw-back-btn" onclick="iwGoBack(2)">‚Üê Back</button>
                <h3 class="iw-step-title">Choose Your Scenario</h3>
                <p class="iw-step-subtitle">What do you want to demonstrate?</p>
                <div class="iw-cards-grid">
                    <div class="iw-card" data-scenario="improve_performance" onclick="iwSelectScenario('improve_performance')">
                        <div class="iw-card-icon">üìà</div>
                        <h4>Improve Model Performance</h4>
                        <p>Compare the same model with and without ITS to see quality improvements</p>
                    </div>
                    <div class="iw-card" data-scenario="match_frontier" onclick="iwSelectScenario('match_frontier')">
                        <div class="iw-card-icon">‚öñÔ∏è</div>
                        <h4>Match Frontier with Smaller Model</h4>
                        <p>Show a small model + ITS matching a large frontier model at lower cost</p>
                    </div>
                </div>
            </div>

            <!-- Step 4: Configure & Run -->
            <div id="iwStep4" class="iw-step hidden">
                <button class="iw-back-btn" onclick="iwGoBack(3)">‚Üê Back</button>
                <h3 class="iw-step-title">Configure &amp; Run</h3>
                <p class="iw-step-subtitle">Select model, algorithm, and question ‚Äî then run your comparison</p>

                <div class="iw-config-grid" id="iwConfigGrid">
                    <div class="iw-form-group">
                        <label id="iwModelLabel" for="iwModelSelect">Model</label>
                        <select id="iwModelSelect"></select>
                    </div>

                    <div class="iw-form-group hidden" id="iwFrontierGroup">
                        <label for="iwFrontierSelect">Frontier Model</label>
                        <select id="iwFrontierSelect"></select>
                    </div>

                    <div class="iw-form-group">
                        <label for="iwAlgorithm">ITS Algorithm</label>
                        <select id="iwAlgorithm" onchange="iwAlgorithmChanged()">
                            <option value="self_consistency">Self-Consistency</option>
                            <option value="best_of_n">Best-of-N</option>
                        </select>
                    </div>

                    <div class="iw-form-group">
                        <label for="iwBudget">Budget (candidates)</label>
                        <div class="iw-budget-display">
                            <input type="range" id="iwBudget" min="2" max="16" value="4" oninput="iwBudgetChanged(this)">
                            <span class="iw-budget-value" id="iwBudgetValue">4</span>
                        </div>
                    </div>
                </div>

                <div style="border-top: 1px solid var(--border-color); margin-top: 24px; padding-top: 24px;">
                    <div class="iw-prompt-section">
                        <label style="display:block; margin-bottom:8px; font-weight:600; font-size:13px; color:var(--text-primary); text-transform:uppercase; letter-spacing:0.03em;">Question</label>
                        <select id="iwCuratedSelect" class="iw-curated-select" onchange="iwCuratedChanged(this)">
                            <option value="">Select a curated question...</option>
                        </select>

                        <div class="iw-divider"><span>or write your own</span></div>

                        <textarea id="iwCustomTextarea" class="iw-custom-textarea"
                                  placeholder="Type your question here..."
                                  oninput="iwCustomChanged(this)"></textarea>
                    </div>
                </div>

                <div class="iw-submit-area">
                    <button class="btn-primary iw-submit-btn" id="iwSubmitBtn" onclick="iwSubmit()">
                        <span>‚ñ∂</span>
                        <span>Run Comparison</span>
                    </button>
                </div>
            </div>

            <!-- Step 5: Results -->
            <div id="iwStep5" class="iw-step hidden">
                <button class="iw-back-btn" onclick="iwGoBack(4)">‚Üê Back to Configure</button>
                <h3 class="iw-step-title">Results</h3>

                <!-- Expected Answer (for curated prompts) -->
                <div id="iwExpectedAnswer" class="iw-expected-answer hidden">
                    <div class="iw-expected-label">Expected Answer</div>
                    <div class="iw-expected-content" id="iwExpectedContent"></div>
                </div>

                <!-- Response panes -->
                <div id="iwResultsArea"></div>

                <!-- Trace Section -->
                <div id="iwTraceSection" class="iw-trace-section hidden">
                    <h4 class="iw-trace-title">ITS Algorithm Trace</h4>
                    <p class="iw-trace-subtitle" id="iwTraceSubtitle"></p>
                    <div id="iwTraceContent"></div>
                </div>

                <!-- Performance Section -->
                <div id="iwPerfSection" class="iw-perf-section hidden">
                    <h4 class="iw-perf-title">Performance Comparison</h4>
                    <div id="iwPerfContainer"></div>
                </div>

                <!-- Restart -->
                <div class="iw-restart-area">
                    <button class="btn-secondary" onclick="iwGoBack(4)" style="margin-right:12px;">
                        Run Another Question
                    </button>
                    <button class="btn-secondary" onclick="iwInit()">
                        Start Over
                    </button>
                </div>
            </div>
        </div>

        <!-- Scenario Selector (Guided Mode Only) -->
        <div class="section" id="scenarioSection">
            <div id="scenarioSelectorContainer" class="scenario-selector-container">
                <div class="scenario-selector-header">
                    <span class="scenario-selector-label">Choose a Demo Scenario</span>
                    <div class="scenario-navigation">
                        <button class="scenario-nav-btn" id="prevScenarioBtn" onclick="navigateScenario(-1)">‚Üê Prev</button>
                        <select id="scenarioDropdown" class="scenario-dropdown" onchange="loadScenario(parseInt(this.value))">
                            <!-- Options populated dynamically -->
                        </select>
                        <button class="scenario-nav-btn" id="nextScenarioBtn" onclick="navigateScenario(1)">Next ‚Üí</button>
                    </div>
                </div>
                <div id="scenarioInfo" class="scenario-info">
                    <!-- Scenario metadata populated dynamically -->
                </div>
            </div>
        </div>

        <!-- Configuration Section -->
        <div class="section" id="configSection">
            <div class="section-header">
                <h2 class="section-title">Configuration</h2>
                <p class="section-description" id="configDescription">Choose your model, algorithm, and compute budget</p>
            </div>

            <div class="form-grid" id="modelSelectionGrid">
                <div class="form-group hidden" id="frontierModelGroup">
                    <label for="frontierModel">Frontier Model</label>
                    <select id="frontierModel">
                        <option value="">Loading models...</option>
                    </select>
                </div>

                <div class="form-group" id="modelGroup">
                    <label for="model" id="modelLabel">Model</label>
                    <select id="model">
                        <option value="">Loading models...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="algorithm">
                        ITS Algorithm
                    </label>
                    <select id="algorithm" onchange="onAlgorithmChange()">
                        <optgroup label="Production">
                            <option value="best_of_n">Best-of-N</option>
                            <option value="self_consistency">Self-Consistency</option>
                        </optgroup>
                        <optgroup label="Research (requires PRM)">
                            <option value="beam_search">Beam Search</option>
                            <option value="particle_filtering">Particle Filtering</option>
                            <option value="entropic_particle_filtering">Entropic Particle Filtering</option>
                            <option value="particle_gibbs">Particle Gibbs</option>
                        </optgroup>
                    </select>
                </div>
            </div>

            <!-- Algorithm Info (Dynamic) -->
            <div id="algorithmInfo"></div>

            <div class="form-group" style="margin-top: 20px;">
                <label for="budget">
                    Budget
                    <span class="label-helper">‚Äì Computational resources allocated</span>
                </label>
                <div class="slider-container">
                    <div class="slider-header">
                        <span style="font-size: 13px; color: var(--text-secondary);">Lower</span>
                        <span class="budget-value" id="budgetValue">4</span>
                        <span style="font-size: 13px; color: var(--text-secondary);">Higher</span>
                    </div>
                    <input type="range" id="budget" min="1" max="32" value="4" step="1">
                </div>
            </div>
        </div>

        <!-- Question Section -->
        <div class="section" id="questionSection">
            <div class="section-header">
                <h2 class="section-title">Your Question</h2>
                <p class="section-description">Ask anything or try an example</p>
            </div>

            <div class="form-group">
                <!-- Guided Mode Question Selector -->
                <div id="guidedQuestions" class="guided-questions">
                    <label class="guided-questions-label">Choose a question that demonstrates this algorithm:</label>
                    <div id="guidedQuestionsGrid" class="guided-questions-grid">
                        <!-- Questions will be populated dynamically -->
                    </div>
                </div>

                <label for="question">Question</label>
                <textarea id="question" placeholder="Enter your question here...">Explain quantum entanglement in simple terms.</textarea>

                <div class="example-questions-container">
                    <label for="exampleQuestions" class="example-label">
                        <span>üí°</span>
                        <span>Try an example question</span>
                    </label>
                    <select id="exampleQuestions" class="example-select">
                        <option value="">Select an example...</option>
                    </select>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn-primary" id="runButton" onclick="runComparison()">
                    <span>‚ñ∂</span>
                    <span>Run Comparison</span>
                </button>
                <button class="btn-secondary" onclick="clearResults()">Clear</button>
            </div>
        </div>

        <div id="errorContainer"></div>

        <!-- Expected Answer -->
        <div id="expectedAnswerContainer" class="expected-answer-container">
            <div class="expected-answer-header">
                <span class="check-icon">‚úì</span>
                <strong>Expected Answer</strong>
            </div>
            <div id="expectedAnswerContent" class="expected-answer-content"></div>
        </div>

        <!-- Results -->
        <div class="results" id="resultsContainer">
            <!-- Small Model Baseline (only shown in match_frontier mode) -->
            <div class="result-pane hidden" id="smallBaselinePane">
                <div class="pane-header">
                    <div class="pane-title">
                        <span class="pane-indicator baseline"></span>
                        <span id="smallBaselineTitle">Small Model</span>
                        <span class="size-badge small hidden" id="smallBaselineSize">Small</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div class="cost-badge hidden" id="smallBaselineCost">-</div>
                        <div class="latency-badge hidden" id="smallBaselineLatency">-</div>
                        <div class="result-actions hidden" id="smallBaselineActions">
                            <button class="action-btn" onclick="copyToClipboard('smallBaseline')" title="Copy answer">üìã</button>
                        </div>
                    </div>
                </div>
                <div id="smallBaselineContent" class="answer-content">
                    <div class="empty-state">
                        <div class="empty-state-icon">üí≠</div>
                        <div>Run a comparison to see results</div>
                    </div>
                </div>
            </div>

            <!-- ITS Result (or Baseline for improve_model mode) -->
            <div class="result-pane">
                <div class="pane-header">
                    <div class="pane-title">
                        <span class="pane-indicator baseline" id="middlePaneIndicator"></span>
                        <span id="middlePaneTitle">Baseline</span>
                        <span class="size-badge hidden" id="middlePaneSize">-</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div class="cost-badge hidden" id="middlePaneCost">-</div>
                        <div class="latency-badge hidden" id="middlePaneLatency">-</div>
                        <div class="result-actions hidden" id="middlePaneActions">
                            <button class="action-btn" onclick="copyToClipboard('middlePane')" title="Copy answer">üìã</button>
                        </div>
                    </div>
                </div>
                <div id="middlePaneContent" class="answer-content">
                    <div class="empty-state">
                        <div class="empty-state-icon">üí≠</div>
                        <div>Run a comparison to see results</div>
                    </div>
                </div>
            </div>

            <!-- Frontier Model or ITS Result -->
            <div class="result-pane">
                <div class="pane-header">
                    <div class="pane-title">
                        <span class="pane-indicator its" id="rightPaneIndicator"></span>
                        <span id="rightPaneTitle">ITS Result</span>
                        <span class="size-badge hidden" id="rightPaneSize">-</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div class="cost-badge hidden" id="rightPaneCost">-</div>
                        <div class="latency-badge hidden" id="rightPaneLatency">-</div>
                        <div class="result-actions hidden" id="rightPaneActions">
                            <button class="action-btn" onclick="copyToClipboard('rightPane')" title="Copy answer">üìã</button>
                        </div>
                    </div>
                </div>
                <div id="rightPaneContent" class="answer-content">
                    <div class="empty-state">
                        <div class="empty-state-icon">üöÄ</div>
                        <div>Run a comparison to see results</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Performance Visualization -->
        <div class="hidden" id="performance-visualization-container" style="margin-top: 48px;">
            <div id="performance-visualization"></div>
        </div>
    </div>
    </div><!-- End demoContainer -->

    <script src="app.js"></script>

    <!-- Performance Visualization V2 JS -->
    <script src="performance-viz-v2.js"></script>

    <!-- Guided Demo Flow JS -->
    <script src="guided-demo.js"></script>

    <!-- Interactive Demo Flow JS -->
    <script src="interactive-demo.js"></script>
</body>
</html>
